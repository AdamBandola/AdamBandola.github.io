<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
<title>Adam Bandola: Data Pre-Processing</title>

<meta property="description" itemprop="description" content="In this post is data pre-processing for a retention predictive modeling project. Includes variable recoding, imputation and dummy variables."/>


<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2020-02-20"/>
<meta property="article:created" itemprop="dateCreated" content="2020-02-20"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="Adam Bandola: Data Pre-Processing"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="In this post is data pre-processing for a retention predictive modeling project. Includes variable recoding, imputation and dummy variables."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="Adam Bandola"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary"/>
<meta property="twitter:title" content="Adam Bandola: Data Pre-Processing"/>
<meta property="twitter:description" content="In this post is data pre-processing for a retention predictive modeling project. Includes variable recoding, imputation and dummy variables."/>

<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","date","output"]}},"value":[{"type":"character","attributes":{},"value":["Data Pre-Processing"]},{"type":"character","attributes":{},"value":["In this post is data pre-processing for a retention predictive modeling project. Includes variable recoding, imputation and dummy variables."]},{"type":"character","attributes":{},"value":["2020-02-20"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc","toc_float","code_folding","fig_caption"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["Show Code"]},{"type":"logical","attributes":{},"value":[true]}]}]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["clean.data.RDS","Data-PreProcessing_files/anchor-4.2.2/anchor.min.js","Data-PreProcessing_files/bowser-1.9.3/bowser.min.js","Data-PreProcessing_files/distill-2.2.21/template.v2.js","Data-PreProcessing_files/figure-html5/Imputation-1.png","Data-PreProcessing_files/figure-html5/Imputation-2.png","Data-PreProcessing_files/figure-html5/RecodingVariable-1.png","Data-PreProcessing_files/figure-html5/RecodingVariable-2.png","Data-PreProcessing_files/figure-html5/RemovingVariables-1.png","Data-PreProcessing_files/figure-html5/RemovingVariables-2.png","Data-PreProcessing_files/jquery-1.11.3/jquery.min.js","Data-PreProcessing_files/popper-2.6.0/popper.min.js","Data-PreProcessing_files/tippy-6.2.7/tippy-bundle.umd.min.js","Data-PreProcessing_files/tippy-6.2.7/tippy-light-border.css","Data-PreProcessing_files/tippy-6.2.7/tippy.css","Data-PreProcessing_files/tippy-6.2.7/tippy.umd.min.js","Data-PreProcessing_files/webcomponents-2.0.0/webcomponents.js","domestic_data.csv","WebScraping_files/anchor-4.2.2/anchor.min.js","WebScraping_files/bowser-1.9.3/bowser.min.js","WebScraping_files/distill-2.2.21/template.v2.js","WebScraping_files/jquery-1.11.3/jquery.min.js","WebScraping_files/popper-2.6.0/popper.min.js","WebScraping_files/tippy-6.2.7/tippy-bundle.umd.min.js","WebScraping_files/tippy-6.2.7/tippy-light-border.css","WebScraping_files/tippy-6.2.7/tippy.css","WebScraping_files/tippy-6.2.7/tippy.umd.min.js","WebScraping_files/webcomponents-2.0.0/webcomponents.js","WebScraping.html","welcome_files/anchor-4.2.2/anchor.min.js","welcome_files/bowser-1.9.3/bowser.min.js","welcome_files/distill-2.2.21/template.v2.js","welcome_files/jquery-1.11.3/jquery.min.js","welcome_files/popper-2.6.0/popper.min.js","welcome_files/tippy-6.2.7/tippy-bundle.umd.min.js","welcome_files/tippy-6.2.7/tippy-light-border.css","welcome_files/tippy-6.2.7/tippy.css","welcome_files/tippy-6.2.7/tippy.umd.min.js","welcome_files/webcomponents-2.0.0/webcomponents.js"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure img {
  width: 100%;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<!--/radix_placeholder_distill-->
  <script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Data Pre-Processing","description":"In this post is data pre-processing for a retention predictive modeling project. Includes variable recoding, imputation and dummy variables.","authors":[],"publishedDate":"2020-02-20T00:00:00.000+00:00"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="../../index.html" class="title">Adam Bandola</a>
</div>
<div class="nav-right">
<a href="../../trestles.html">Welcome</a>
<a href="../../projectListings.html">Relevant Projects</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Data Pre-Processing</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p>In this post is data pre-processing for a retention predictive modeling project. Includes variable recoding, imputation and dummy variables.<br /></p>
</div>


<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#background-context">Background Context</a></li>
<li><a href="#creating-new-dataset">Creating New Dataset</a></li>
<li><a href="#addressing-response-variable">Addressing Response Variable</a></li>
<li><a href="#removing-variables">Removing Variables</a></li>
<li><a href="#recoding-high-school-type">Recoding High School Type</a></li>
<li><a href="#imputating-variables-with-missing-values">Imputating Variables With Missing Values</a></li>
<li><a href="#creating-dummy-variables">Creating Dummy Variables</a></li>
</ul>
</nav>
</div>
<h2 id="background-context">Background Context</h2>
<p>In this project for a class, I was tasked by Dr. Scott Sportsman, the Director of Enrollment Research and Analysis, who had given us a task of assigning a likelihood of as student not to be retained based on only the application data of the student. The university definition of retention is that a student returned for their third semester. Thus the retention rate reported in US News and World Report is the percentage of students who start as typical freshman and returned for the first semester of their sophomore year. Note that “return” means that the student was enrolled in class on October 15 of that semester. If a student left Miami after that date in the semester then they would be counted as being “retained”. This will give Miami information as to which students to give extra attention to upon admittance.</p>
<h4 id="goal">Goal</h4>
<p>To clean data for later processing into logistic regression, random and boosted tree models, and neural network models.</p>
<h2 id="creating-new-dataset">Creating New Dataset</h2>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>Show Code</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#-----------------------------------------------Creating New Dataset--------------------------------------------------------------</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span> 
<span class='co'>#Creating a new data set that only has the variables that are included in the 2018 year, ulimately testing our model on</span>
<span class='co'>#Below are the variables we used and, if they weren't working based on given names, we found names of variables that matched up:</span>
              <span class='co'>#Left out SAT R ERW, SAT R Math</span>
              <span class='co'>#Changed Class Percentile to RankPercentile because they seemed to be the same, just two different names</span>
              <span class='co'>#High School Type Slate = HsType</span>
              <span class='co'>#Could not find Parent 1 or 2 Education Level in the data set as a variable</span>
              <span class='co'>#TOEFL could not be found in the data set along with TOEFL Total</span>
              <span class='co'>#TOEFL Listening = TIBL, TOEFL Reading = TIBR, TOEFL Written Expression = TIBW, TOEFL Speaking = TIBS</span>
              <span class='co'>#IELTS Overall = IELO, IELTS Listening = IELL... so on</span>
              <span class='co'>#Assumed that VentureScholar was = SummerScholars</span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>retained</span>, <span class='va'>tag</span>, <span class='va'>HomeState</span>, <span class='va'>ZipCode</span>, <span class='va'>Zip5</span>, <span class='va'>NationDesc</span>, <span class='va'>CountyDesc</span>, <span class='va'>Status</span>, <span class='va'>ACEFlag</span>, <span class='va'>InternationalFlag</span>, <span class='va'>StateResidency</span>, <span class='va'>Gender</span>, <span class='va'>MCFlag</span>, <span class='va'>OneRace</span>, <span class='va'>FullRace</span>, <span class='va'>FirstGen</span>, <span class='va'>AlumniConnection</span>, <span class='va'>Division</span>, <span class='va'>Major</span>, <span class='va'>SuppMajor1</span>, <span class='va'>SuppMajor2</span>, <span class='va'>Concentration</span>, <span class='va'>ApplicationType</span>, <span class='va'>ApplicationDate</span>,<span class='va'>Housing</span>, <span class='va'>SpecialConsideration</span>, <span class='va'>DisciplinaryQuestion1</span>, <span class='va'>Decision</span>, <span class='va'>DecisionType</span>, <span class='va'>DecisionDate</span>, <span class='va'>ConfirmDate</span>, <span class='va'>ACTBest</span>, <span class='va'>GPA</span>, <span class='va'>AcadRS</span>, <span class='va'>GPAScale</span>, <span class='va'>GPAOrig</span>, <span class='va'>ClassRank</span>, <span class='va'>ClassSize</span>, <span class='va'>ACTComposite</span>, <span class='va'>ACTEng</span>, <span class='va'>ACTMath</span>, <span class='va'>ACTRdng</span>, <span class='va'>ACTSci</span>, <span class='va'>ACTWRSC</span>, <span class='va'>SATVerbal</span>, <span class='va'>SATMath</span>, <span class='va'>SATWRSC</span>, <span class='va'>ACTChoice</span>, <span class='va'>ACTMaxComposite</span>, <span class='va'>ACTMaxEnglish</span>, <span class='va'>ACTMaxMath</span>, <span class='va'>ACTMaxReading</span>, <span class='va'>ACTMaxSciReasoning</span>, <span class='va'>ACTWritingMax</span>, <span class='va'>RankPercent</span>, <span class='va'>HighSchoolCode</span>, <span class='va'>HighSchoolState</span>, <span class='va'>HsType</span>, <span class='va'>EER</span>, <span class='va'>DateFrom</span>, <span class='va'>Citizen</span>, <span class='va'>Citizenship</span>, <span class='va'>TIBL</span>, <span class='va'>TIBR</span>, <span class='va'>TIBW</span>, <span class='va'>TIBS</span>, <span class='va'>IELO</span>, <span class='va'>IELL</span>, <span class='va'>IELR</span>, <span class='va'>IELW</span>, <span class='va'>IELS</span>, <span class='va'>Bridges</span>, <span class='va'>VentureScholar</span>, <span class='va'>Race</span>, <span class='va'>Hispanic</span>, <span class='va'>AS_Race</span>, <span class='va'>AI_Race</span>, <span class='va'>BL_Race</span>, <span class='va'>HS_Race</span>, <span class='va'>PI_Race</span>, <span class='va'>MiamiRanks</span><span class='op'>)</span>


<span class='co'>#----------------------------------------------Selecting Our Training Years------------------------------------------------------</span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>DateFrom</span> <span class='op'>&gt;=</span> <span class='fl'>2013</span><span class='op'>)</span> <span class='co'>#Subsetting the data to include the years that we are interested in</span>
<span class='co'>#Helps when figuring out what variables to remove considering were only looking at the observations in years were interested in</span>
<span class='va'>variable_removal</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>DateFrom</span><span class='op'>)</span><span class='op'>)</span> 
</code></pre>
</div>
</details>
</div>
<blockquote>
<p>Individually selected the variables that was wanted to include in the data frame. Some variables were left out, some were renamed. Also subsetted the data in order to only include the years that were of interest.</p>
</blockquote>
<h2 id="addressing-response-variable">Addressing Response Variable</h2>
<p>Recoding the response variable to ensure that it is in the preferred format.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>Show Code</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#--------------------------------------------------Response Variable Retained----------------------------------------------------------------</span>
<span class='co'>#Looking at our response variable, retained</span>
<span class='co'># class(data$retained) #It is an integer, but we want it as a factor, so:</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>retained</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>retained</span><span class='op'>)</span>
<span class='co'># levels(data$retained)</span>
<span class='co'># summary(data$retained)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>retained</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/recode.html'>recode_factor</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>retained</span>, <span class='st'>"0"</span> <span class='op'>=</span> <span class='st'>"Yes"</span>,  <span class='st'>"1"</span> <span class='op'>=</span> <span class='st'>"No"</span><span class='op'>)</span>
<span class='co'># levels(data$retained)</span>
<span class='co'># summary(data$retained) #The base is 0 (retained) and 1 is that they are not retained, 23 missing values that we remove:</span>

<span class='co'># Delete the retained that are missing - You can't use rows that have the response missing</span>
<span class='va'>M_retained</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>retained</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='va'>data</span><span class='op'>[</span><span class='op'>-</span><span class='va'>M_retained</span>,<span class='op'>]</span>
</code></pre>
</div>
</details>
</div>
<blockquote>
<p>Changed the base of <b><i>retained</i></b> variable to be 0 (Yes, the student is retained) and 1 (No, the student was not retained). Proceeded to remove the rows that have missing <b><i>retained</i></b> values.</p>
</blockquote>
<h2 id="removing-variables">Removing Variables</h2>
<p>Need to remove variables that have too many missing values as well as removed variables that are redundant, not important or unclear.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>Show Code</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#----------------------------------------------------Removing Variable Work----------------------------------------------------------</span>
<span class='co'>##Finding out the variables that have over 38% missing data, then removing them</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://boxuancui.github.io/DataExplorer/'>DataExplorer</a></span><span class='op'>)</span>
<span class='va'>plot1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='http://boxuancui.github.io/DataExplorer/reference/plot_missing.html'>plot_missing</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>)</span>

<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='va'>data</span><span class='op'>[</span>, <span class='fu'><a href='https://rdrr.io/r/base/colSums.html'>colMeans</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>&lt;=</span> <span class='fl'>.38</span><span class='op'>]</span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>Citizen</span>, <span class='va'>Race</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>-</span><span class='va'>HighSchoolState</span><span class='op'>)</span> <span class='co'># Have other variables that account for this</span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>-</span><span class='va'>OneRace</span><span class='op'>)</span>  <span class='co'>#Decide to remove OneRace because it has more missing observations than any single level inside of the variable</span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>-</span><span class='va'>Concentration</span><span class='op'>)</span> <span class='co'># Keep major, delete concentration, they account for the same variable </span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>-</span><span class='va'>Citizenship</span><span class='op'>)</span> <span class='co'># Already have the variable citizen, redundant variable </span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>-</span><span class='va'>tag</span><span class='op'>)</span>  <span class='co'>#Removing Tag because we are not concerned with the ID of the student that dropped</span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>-</span><span class='va'>Decision</span><span class='op'>)</span> <span class='co'>#You cannot retain a student that is not admitted to the university, therefore it also has only one level that is AA = Admitted </span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>-</span><span class='va'>HighSchoolCode</span><span class='op'>)</span>  <span class='co'>#Removing HighSchoolCode because we have so many other variables that account for where the person lives, the type of highschool, etc. It's redundant. </span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>GPA</span><span class='op'>[</span><span class='va'>data</span><span class='op'>$</span><span class='va'>GPA</span> <span class='op'>&gt;</span><span class='fl'>5</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>GPA</span><span class='op'>)</span><span class='co'># Delete observations where GPA is greater than 5 because that isn't possible</span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>-</span><span class='va'>EER</span><span class='op'>)</span>  <span class='co'>#Decided to delete EER because the definition was very unclear and wouldn't be easy to comprehend in a model.</span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>-</span><span class='va'>SuppMajor1</span>, <span class='op'>-</span><span class='va'>SuppMajor2</span><span class='op'>)</span> <span class='co'>#Aren't interested in what majors they selected on their application</span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>-</span><span class='va'>FullRace</span><span class='op'>)</span> <span class='co'>#Very unclear definition, if its in regards to race then the variable is redundant</span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>-</span><span class='va'>GPAScale</span><span class='op'>)</span> <span class='co'>#GPA is already accounted for on a scale of 4.0, redundant variable</span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>-</span><span class='va'>HomeState</span><span class='op'>)</span> <span class='co'>#Redundant since CountyDesc accounts for the county and state someones from</span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>-</span><span class='va'>ACTChoice</span><span class='op'>)</span> <span class='co'>#Not interested in which ACT test they chose</span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>-</span><span class='va'>MiamiRanks</span><span class='op'>)</span> <span class='co'>#Doesn't apply to what were interested in</span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>-</span><span class='va'>CountyDesc</span><span class='op'>)</span> <span class='co'>#Already have StateResidency that is in the data, redundant variable</span>

<span class='va'>plot2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='http://boxuancui.github.io/DataExplorer/reference/plot_missing.html'>plot_missing</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<div class="figure"><span id="fig:RemovingVariables"></span>
<img src="Data-PreProcessing_files/figure-html5/RemovingVariables-1.png" alt="Before and After" width="288" /><img src="Data-PreProcessing_files/figure-html5/RemovingVariables-2.png" alt="Before and After" width="288" />
<p class="caption">
Figure 1: Before and After
</p>
</div>
</div>
<blockquote>
<p>Removed variables that had more than 38% of their observations missing. Normally, I would have stuck closer to 50% of the data missing, but there was a large drop off from 38% to the next highest so I decided to not include those that had over 38%. Many of the variables were redundant, such as <b><i>Concentration</i></b> is redundant to <b><i>Major</i></b>, so the lesser important of the two was removed. Same goes for many of the variables being removed in this section.</p>
</blockquote>
<h2 id="recoding-high-school-type">Recoding High School Type</h2>
<p>Recoding the <b>HsType</b> to be more condensed and logical.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>Show Code</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#-----------Recoding Variables to make more sense/decrease degrees of freedom needed for dummy variables---------------------</span>
<span class='fu'><a href='http://boxuancui.github.io/DataExplorer/reference/plot_bar.html'>plot_bar</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>HsType</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>HsType</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/recode.html'>recode_factor</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>HsType</span>, <span class='st'>"1"</span> <span class='op'>=</span> <span class='st'>"Public"</span>, <span class='st'>"2"</span> <span class='op'>=</span> <span class='st'>"Private"</span>, <span class='st'>"3"</span> <span class='op'>=</span> <span class='st'>"Catholic"</span>, <span class='st'>"4"</span> <span class='op'>=</span> <span class='st'>"Other Parochial"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>HsType</span><span class='op'>)</span> <span class='co'># A lot of the levels dont have many observations and can be combined into an "Other category"</span>
</code></pre>
</div>
</details>
<pre><code> [1] &quot;Public&quot;          &quot;Private&quot;         &quot;Catholic&quot;       
 [4] &quot;Other Parochial&quot; &quot;&quot;                &quot;Private Secular&quot;
 [7] &quot;Religious&quot;       &quot;Unknown&quot;         &quot;Charter&quot;        
[10] &quot;Home School&quot;    </code></pre>
<details>
<summary>Show Code</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r">                    <span class='co'># Catholic and other religions could be grouped together to just be called a religious school</span>
        <span class='va'>data</span><span class='op'>$</span><span class='va'>HsType</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/recode.html'>recode_factor</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>HsType</span>, <span class='st'>"Catholic"</span> <span class='op'>=</span> <span class='st'>"Religious"</span>, <span class='st'>"Other Parochial"</span> <span class='op'>=</span> <span class='st'>"Religious"</span><span class='op'>)</span> <span class='co'>#Religious</span>
        <span class='va'>data</span><span class='op'>$</span><span class='va'>HsType</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/recode.html'>recode_factor</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>HsType</span>, <span class='st'>"Unknown"</span> <span class='op'>=</span> <span class='st'>"Other"</span>, <span class='st'>"Charter"</span> <span class='op'>=</span> <span class='st'>"Other"</span>, <span class='st'>"Home School"</span> <span class='op'>=</span> <span class='st'>"Other"</span><span class='op'>)</span> <span class='co'>#Other small ones</span>
        <span class='va'>data</span><span class='op'>$</span><span class='va'>HsType</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/recode.html'>recode_factor</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>HsType</span>, <span class='st'>"Private Secular"</span> <span class='op'>=</span> <span class='st'>"Private"</span><span class='op'>)</span>
<span class='fu'><a href='http://boxuancui.github.io/DataExplorer/reference/plot_bar.html'>plot_bar</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>HsType</span><span class='op'>)</span>        
</code></pre>
</div>
</details>
<div class="figure"><span id="fig:RecodingVariable"></span>
<img src="Data-PreProcessing_files/figure-html5/RecodingVariable-1.png" alt="Before and After" width="288" /><img src="Data-PreProcessing_files/figure-html5/RecodingVariable-2.png" alt="Before and After" width="288" />
<p class="caption">
Figure 2: Before and After
</p>
</div>
</div>
<blockquote>
<p>Many of the variables are broken into two parts prior to the recoding. 1 is combined with Public, 2 is combined with Private, 3 is combined with Catholic, 4 is combined with Other Parochial. From this step, I combined the religious schools into a single category, forms of high school type that were smaller (Charter, Home School) into a single category and combined Private Secular into Private category.</p>
</blockquote>
<h2 id="imputating-variables-with-missing-values">Imputating Variables With Missing Values</h2>
<p>After the 38% threshold of missing values, there are still some variables that have missing values. For this reason, imputation for both numerical and categorical variables is necessary.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>Show Code</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#---------------------------------------------------Imputation--------------------------------------------------------------</span>
<span class='co'>#Beginning to impute variables that have some percent of the observations missing, the highest percent being 26%. </span>
<span class='co'># str(data)</span>

<span class='va'>plot3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='http://boxuancui.github.io/DataExplorer/reference/plot_missing.html'>plot_missing</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>)</span>
<span class='co'>## NUMERICAL</span>
<span class='co'>#ClassSize</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>Indicator_ClassSize</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>ClassSize</span><span class='op'>)</span>, <span class='fl'>1</span>, <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>ClassSize</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>ClassSize</span><span class='op'>)</span><span class='op'>]</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/stats/median.html'>median</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>ClassSize</span>, na.rm<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
<span class='co'>#ACTEng</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>Indicator_ACTEng</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>ACTEng</span><span class='op'>)</span>, <span class='fl'>1</span>, <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>ACTEng</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>ACTEng</span><span class='op'>)</span><span class='op'>]</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/stats/median.html'>median</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>ACTEng</span>, na.rm<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
<span class='co'>#ACTSci</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>Indicator_ACTSci</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>ACTSci</span><span class='op'>)</span>, <span class='fl'>1</span>, <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>ACTSci</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>ACTSci</span><span class='op'>)</span><span class='op'>]</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/stats/median.html'>median</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>ACTSci</span>, na.rm<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
<span class='co'>#ACTRdng</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>Indicator_ACTRdng</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>ACTRdng</span><span class='op'>)</span>, <span class='fl'>1</span>, <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>ACTRdng</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>ACTRdng</span><span class='op'>)</span><span class='op'>]</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/stats/median.html'>median</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>ACTRdng</span>, na.rm<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
<span class='co'>#ACTMath</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>Indicator_ACTMath</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>ACTMath</span><span class='op'>)</span>, <span class='fl'>1</span>, <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>ACTMath</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>ACTMath</span><span class='op'>)</span><span class='op'>]</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/stats/median.html'>median</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>ACTMath</span>, na.rm<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
<span class='co'>#ACTComposite</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>Indicator_ACTComposite</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>ACTComposite</span><span class='op'>)</span>, <span class='fl'>1</span>, <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>ACTComposite</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>ACTComposite</span><span class='op'>)</span><span class='op'>]</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/stats/median.html'>median</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>ACTComposite</span>, na.rm<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
<span class='co'># GPA Imputing</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>M_GPA</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>GPA</span><span class='op'>)</span>, <span class='fl'>1</span>, <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>GPA</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>GPA</span><span class='op'>)</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>GPA</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='co'>#AcadRS</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>Indicator_AcadRS</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>AcadRS</span><span class='op'>)</span>, <span class='fl'>1</span>, <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>AcadRS</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>AcadRS</span><span class='op'>)</span><span class='op'>]</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/median.html'>median</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>AcadRS</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='va'>plot4</span> <span class='op'>&lt;-</span> <span class='fu'><a href='http://boxuancui.github.io/DataExplorer/reference/plot_missing.html'>plot_missing</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>)</span>

<span class='co'>## CATEGORICAL </span>
<span class='co'>#HsType</span>
<span class='va'>levels</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>HsType</span><span class='op'>)</span>
<span class='va'>levels</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>levels</span><span class='op'>)</span> <span class='op'>+</span> <span class='fl'>1</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"Unknown"</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>HsType</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>HsType</span>, levels <span class='op'>=</span> <span class='va'>levels</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>HsType</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>HsType</span><span class='op'>)</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"Unknown"</span>
<span class='co'>#DecisionDate</span>
<span class='va'>levels</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>DecisionDate</span><span class='op'>)</span>
<span class='va'>levels</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>levels</span><span class='op'>)</span> <span class='op'>+</span> <span class='fl'>1</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"Unknown"</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>DecisionDate</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>DecisionDate</span>, levels <span class='op'>=</span> <span class='va'>levels</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>DecisionDate</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>DecisionDate</span><span class='op'>)</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"Unknown"</span>

<span class='co'>#ApplicationDate</span>
<span class='va'>levels</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>ApplicationDate</span><span class='op'>)</span>
<span class='va'>levels</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>levels</span><span class='op'>)</span> <span class='op'>+</span> <span class='fl'>1</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"Unknown"</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>ApplicationDate</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>ApplicationDate</span>, levels <span class='op'>=</span> <span class='va'>levels</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>ApplicationDate</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>ApplicationDate</span><span class='op'>)</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"Unknown"</span>
</code></pre>
</div>
</details>
<div class="figure"><span id="fig:Imputation"></span>
<img src="Data-PreProcessing_files/figure-html5/Imputation-1.png" alt="Numerical and Categorical Variables with Missing Values " width="288" /><img src="Data-PreProcessing_files/figure-html5/Imputation-2.png" alt="Numerical and Categorical Variables with Missing Values " width="288" />
<p class="caption">
Figure 3: Numerical and Categorical Variables with Missing Values
</p>
</div>
</div>
<h2 id="creating-dummy-variables">Creating Dummy Variables</h2>
<p>Creating dummy variables for categorical variables so logistic regression can be used on the data.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>Show Code</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#-----------------------------------------Creating Dummy Variables for Categorical----------------------------------------</span>
<span class='co'># str(data)</span>

<span class='co'># InternationalFlag needs consistent formatting (caps vs. non-cap) then turned into dummy variable ****</span>
<span class='co'># summary(data$InternationalFlag)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>InternationalFlag</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/recode.html'>recode_factor</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>InternationalFlag</span>, <span class='st'>"domestic"</span> <span class='op'>=</span> <span class='st'>"Domestic"</span>, <span class='st'>"international"</span> <span class='op'>=</span> <span class='st'>"International"</span><span class='op'>)</span>
<span class='co'># levels(data$InternationalFlag)</span>
<span class='co'># summary(data$InternationalFlag)</span>
<span class='va'>dumIntFlag</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/model.matrix.html'>model.matrix</a></span><span class='op'>(</span><span class='op'>~</span><span class='fl'>0</span><span class='op'>+</span><span class='va'>InternationalFlag</span>, data<span class='op'>=</span><span class='va'>data</span><span class='op'>)</span>
<span class='va'>dumIntFlag</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='va'>dumIntFlag</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>DomesticFlag</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>dumIntFlag</span><span class='op'>$</span><span class='va'>InternationalFlagDomestic</span><span class='op'>)</span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>-</span><span class='va'>InternationalFlag</span><span class='op'>)</span> <span class='co'>#Created the dummy so we have no need for the original variable now</span>

<span class='co'>#Division</span>
<span class='va'>dummyDivision</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/model.matrix.html'>model.matrix</a></span><span class='op'>(</span><span class='op'>~</span> <span class='fl'>0</span> <span class='op'>+</span> <span class='va'>Division</span>, data <span class='op'>=</span> <span class='va'>data</span><span class='op'>)</span>
<span class='va'>dummyDivision</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='va'>dummyDivision</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>DivisionAP</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>dummyDivision</span><span class='op'>$</span><span class='va'>DivisionAP</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>DivisionAS</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>dummyDivision</span><span class='op'>$</span><span class='va'>DivisionAS</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>DivisionBU</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>dummyDivision</span><span class='op'>$</span><span class='va'>DivisionBU</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>DivisionCAS</span> <span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>dummyDivision</span><span class='op'>$</span><span class='va'>DivisionCAS</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>DivisionCCA</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>dummyDivision</span><span class='op'>$</span><span class='va'>DivisionCCA</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>DivisionCEC</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>dummyDivision</span><span class='op'>$</span><span class='va'>DivisionCEC</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>DivisionCEHS</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>dummyDivision</span><span class='op'>$</span><span class='va'>DivisionCEHS</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>DivisionFSB</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>dummyDivision</span><span class='op'>$</span><span class='va'>DivisionFSB</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>DivisionFA</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>dummyDivision</span><span class='op'>$</span><span class='va'>DivisionFA</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>DivisionEA</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>dummyDivision</span><span class='op'>$</span><span class='va'>DivisionEA</span><span class='op'>)</span>
<span class='va'>data</span> <span class='op'>&lt;-</span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>-</span><span class='va'>Division</span><span class='op'>)</span>

<span class='co'>#StateResidency</span>
<span class='va'>dummyStateResidency</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/model.matrix.html'>model.matrix</a></span><span class='op'>(</span><span class='op'>~</span> <span class='fl'>0</span> <span class='op'>+</span> <span class='va'>StateResidency</span>, data <span class='op'>=</span> <span class='va'>data</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>dummyStateResidency</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='va'>dummyStateResidency</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>StateResidencyN</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>dummyStateResidency</span><span class='op'>$</span><span class='va'>StateResidencyN</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>StateResidencyR</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>dummyStateResidency</span><span class='op'>$</span><span class='va'>StateResidencyR</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>StateResidencyZ</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>dummyStateResidency</span><span class='op'>$</span><span class='va'>StateResidencyZ</span><span class='op'>)</span>

<span class='co'>#Dummy variable for Gender</span>
<span class='va'>dum1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/model.matrix.html'>model.matrix</a></span><span class='op'>(</span><span class='op'>~</span><span class='fl'>0</span><span class='op'>+</span><span class='va'>Gender</span>, data <span class='op'>=</span> <span class='va'>data</span><span class='op'>)</span>
<span class='va'>dum1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='va'>dum1</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>Female</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>dum1</span><span class='op'>$</span><span class='va'>GenderF</span><span class='op'>)</span>
<span class='co'># summary(data)</span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>-</span><span class='va'>Gender</span><span class='op'>)</span> <span class='co'># Delete gender because we have the dummy variables</span>

<span class='co'># Dummy variables for Application Type </span>
<span class='co'># str(data$ApplicationType)</span>
<span class='va'>dum2</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/stats/model.matrix.html'>model.matrix</a></span><span class='op'>(</span><span class='op'>~</span><span class='fl'>0</span><span class='op'>+</span><span class='va'>ApplicationType</span>, data<span class='op'>=</span><span class='va'>data</span><span class='op'>)</span>
<span class='va'>dum2</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='va'>dum2</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>ApplicationTypeOE</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>dum2</span><span class='op'>$</span><span class='va'>ApplicationTypeOE</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>ApplicationTypeOF</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>dum2</span><span class='op'>$</span><span class='va'>ApplicationTypeOF</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>ApplicationTypeOM</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>dum2</span><span class='op'>$</span><span class='va'>ApplicationTypeOM</span><span class='op'>)</span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>-</span><span class='va'>ApplicationType</span><span class='op'>)</span>

<span class='co'>#Dummy variable for Major</span>
<span class='va'>MajorDummy</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/model.matrix.html'>model.matrix</a></span><span class='op'>(</span><span class='op'>~</span><span class='fl'>0</span><span class='op'>+</span><span class='va'>Major</span>, data<span class='op'>=</span><span class='va'>data</span><span class='op'>)</span><span class='op'>)</span>
<span class='co'>#summary(data$Major) # Chose the top 5 majors that were most frequent </span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>Major_UniversityStudies</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>MajorDummy</span><span class='op'>$</span><span class='va'>`MajorUniversity Studies`</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>Major_ASU2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>MajorDummy</span><span class='op'>$</span><span class='va'>MajorASU2</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>Major_BU14</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>MajorDummy</span><span class='op'>$</span><span class='va'>MajorBU14</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>Major_BU56</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>MajorDummy</span><span class='op'>$</span><span class='va'>MajorBU56</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>Major_Biology</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>MajorDummy</span><span class='op'>$</span><span class='va'>MajorBiology</span><span class='op'>)</span>
<span class='co'># summary(data)</span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>-</span><span class='va'>Major</span><span class='op'>)</span>

<span class='co'># Delete date variables </span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='op'>-</span><span class='va'>ApplicationDate</span>, <span class='op'>-</span><span class='va'>DecisionDate</span>, <span class='op'>-</span><span class='va'>DateFrom</span><span class='op'>)</span>


<span class='co'># ---------------------------------------- CODE TO SAVE AS AN RDS FILE ---------------------------------------------</span>
<span class='fu'><a href='https://rdrr.io/r/base/readRDS.html'>saveRDS</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='st'>"clean.data.RDS"</span><span class='op'>)</span>
<span class='co'># getwd() # saves to where your WD is </span>
</code></pre>
</div>
</details>
</div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
